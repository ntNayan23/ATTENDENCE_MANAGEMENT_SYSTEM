{% extends "admin/adminlayout.html" %}
{% block content %}
<main class="mt-3 pt-3">
    <div class="container-fluid">
        {% with messages = get_flashed_messages(with_categories=true) %} {% if
          messages %} {% for category, message in messages %}
          <div
            class="alert alert-{{ category }} alert-dismissible fade show"
            role="alert"
            id="success-alert"
          >
            {{ message }}
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="alert"
              aria-label="Close"
            ></button>
          </div>
          {% endfor %} {% endif %} {% endwith %}
      <h2 class="text-center">Branch</h2>
      <form method="Post" action="/control_task" id="task_from">
        {{ task_from.hidden_tag() }}
         <div class="row mb-1 mt-4 d-flex justify-content-center">
            <div class="col-sm-5">
              <span class="w-100 custom-btn btn-15 text-center"
                >{{task_from.Start(class="btn bg-success w-100 " ) }}</span
              >
            </div>
            <div class="col-sm-5">
                <span class="w-100 custom-btn btn-15 text-center"
                  >{{task_from.Stop (class="btn bg-danger w-100 " ) }}</span
                >
              </div>
          </div>
    
      </form>
    

      <form method="Post" action="/control_task" id="attendance_form">
        {{ attendance_form.hidden_tag() }}
        <div class="row mb-1 align-items-center">
            {{ attendance_form.branch_name.label(class="col-sm-3 ms-3 col-form-label-lg") }}
            <div class="col-sm-3">
              {%if attendance_form.branch_name.errors%} {{attendance_form.branch_name(class="form-select is-invalid")}}
              {%for error in attendance_form.branch_name.errors%}
              <span>{{error}}</span>
              {%endfor%} {%else%} {{attendance_form.branch_name(class="form-select")}} {%endif%}
            </div>
          </div>
          <div class="row mb-1  mt-4 d-flex justify-content-first">
            {{ attendance_form.name.label(class="col-sm-3 ms-3 col-form-label-lg") }}
            <div class="col-sm-2">
              {%if attendance_form.name.errors%} {{attendance_form.name(class="form-select is-invalid")}}
              {%for error in attendance_form.name.errors%}
              <span>{{error}}</span>
              {%endfor%} {%else%} {{attendance_form.name(class="form-select")}} {%endif%}
            </div>
            <div class="col-sm-2">
                <span class="w-100 custom-btn btn-15 text-center"
                >{{attendance_form.Generate_attendance (class="btn bg-danger w-100 " ) }}</span
              >
            </div>
            <div class="col-sm-2">
                <span class="w-100 custom-btn btn-15 text-center"
                >{{attendance_form.Download (class="btn bg-success w-100 " ) }}</span
              >
            </div>
          </div>
         
       
      </form>
    

 
<div class=" container-fluid mb-1 mt-4 d-flex justify-content-center text-center">
    
      <table class="table table-striped table-bordered border-dark">
        <thead class="table-dark">
            <tr>
                <th scope="col">ID</th>
                <th scope="col">Name</th>
                <th scope="col">Branch</th>
                <th scope="col">Date</th>
                <th scope="col">In Time</th>
                <th scope="col">Out Time</th>
            </tr>
        </thead>
        <tbody>
            {% for record in attendance_records %}
            <tr>
                <td>{{ record[0].id }}</td>
                <td>{{ record[1] }}</td>
                <td>{{ record[2] }}</td>
                <td>{{ record[0].date }}</td>
                <td>{{ record[0].in_time }}</td>
                <td>{{ record[0].out_time }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

</div>
</div>

    
    

</main>

{% endblock %} 
{% block javascript %}
<script>
  $("#success-alert")
  .fadeTo(1000, 500)
  .slideUp(300, function () {
    $("#success-alert").slideUp(500);
  });
  </script
{% endblock %}
